---
import NotFound from '#components/NotFound.astro'
import { languages } from '#i18n/ui'
import { getLangFromUrl, useTranslations } from '#i18n/utils'
import BaseLayout from '#layouts/BaseLayout.astro'
import { getEntry } from 'astro:content'
import { getRelativeLocaleUrl } from 'astro:i18n'

export async function getStaticPaths() {
  return languages.map((lang) => ({ params: { lang } }))
}

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
const entry = await getEntry('pages', `404/${lang}`)
---

<BaseLayout seo={entry?.data.seo}>
  <section>
    <h1>{entry?.data.title}</h1>

    <h3>{entry?.data.description}</h3>

    <NotFound />

    <div class="flex justify-center pt-4">
      <a class="btn btn-primary" href={getRelativeLocaleUrl(lang, '')}>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          height="32"
          viewBox="0 0 24 24"
        >
          <path
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m12 19l-7-7l7-7m7 7H5"></path></svg
        >
        {t('404.back')}
      </a>
    </div>
  </section>
</BaseLayout>
